<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Join Our Community - Sign Up</title>
  <script src="https://js.paystack.co/v1/inline.js"></script> <style>
    /* Define your CSS Variables */
    :root {
      --bg-darkest: #121212; /* Very dark background */
      --bg-card: #1a1a1a; /* Slightly lighter for cards */
      --text-light: #e0e0e0;
      --text-muted: #888888; /* Darker muted text for descriptions */
      --accent-dark-purple: #483D8B; /* Dark Slate Blue - main accent */
      --accent-light-purple: #6A5ACD; /* Medium Slate Blue - hover/highlight */
      --border-color: #333333;
      --error-color: #FF0000; /* Red for errors (if needed) */
      --live-red: #FF0000; /* For pulsing live indicator */
      /* Netflix-Inspired Colors */
      --netflix-red: #E50914;
      --netflix-dark: #141414;
      --netflix-darkest: #0d0d0d;
      --netflix-light-grey: #E5E5E5;
      --netflix-mid-grey: #444;
      /* Modernized Palette Adjustments (Primary used for theme) */
      --primary-bg: #0C0C0C; /* Even darker, richer black */
      --secondary-bg: #1A1A1A; /* For cards and secondary elements */
      --accent-color: #7B68EE; /* Brighter, more vibrant slate blue for accent */
      --accent-hover: #9370DB; /* Lighter shade for hover */
      --text-primary: #F0F0F0;
      --text-secondary: #B0B0B0;
      --border-subtle: #2A2A2A;
      --gradient-start: rgba(123, 104, 238, 0.2);
      --gradient-end: rgba(123, 104, 238, 0.0);
    }

    /* General Styling */
    body {
      font-family: sans-serif;
      background: var(--primary-bg);
      color: var(--text-primary);
      padding: 2rem;
      line-height: 1.6;
    }
    .container {
      background: var(--secondary-bg);
      max-width: 550px; /* Slightly wider for more fields */
      margin: auto;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    h2 {
      text-align: center;
      color: var(--accent-color);
      margin-bottom: 1.5rem;
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
      color: var(--text-primary);
    }
    input[type="text"],
    input[type="number"],
    input[type="password"],
    input[type="email"],
    input[type="tel"],
    select {
      width: calc(100% - 1.4rem); /* Account for padding */
      padding: 0.7rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border-subtle);
      border-radius: 4px;
      background: var(--bg-card);
      color: var(--text-primary);
    }
    input::placeholder, select option {
      color: var(--text-secondary);
    }
    select option {
      background: var(--bg-card); /* Background for dropdown options */
    }
    button {
      width: 100%;
      padding: 0.8rem;
      background: var(--accent-color);
      color: white;
      border: none;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s ease;
      margin-top: 1rem;
    }
    button:hover {
        background: var(--accent-hover);
    }
    button:disabled {
      background: var(--text-muted);
      cursor: not-allowed;
    }
    .disclaimer {
        font-size: 0.9em;
        color: var(--text-secondary);
        margin-top: 1.5rem;
        margin-bottom: 1rem;
        text-align: center;
        border: 1px solid var(--border-subtle);
        padding: 10px;
        border-radius: 5px;
    }
    .checkbox-group {
      margin-bottom: 1rem;
      display: flex;
      flex-wrap: wrap;
    }
    .checkbox-group label {
        display: flex;
        align-items: center;
        margin-right: 15px;
        margin-bottom: 8px;
        font-weight: normal;
        color: var(--text-primary);
    }
    .checkbox-group input[type="checkbox"] {
        width: auto;
        margin-right: 5px;
        margin-bottom: 0;
    }

    /* Pop-up Styles */
    .popup-overlay {
      display:none;
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background: rgba(0,0,0,0.85);
      z-index:9999;
      text-align:center;
      padding:2rem;
      box-sizing: border-box; /* Include padding in width/height */
      overflow-y: auto; /* Allow scrolling for longer popups */
    }
    .popup-content {
      background: var(--secondary-bg);
      color: var(--text-primary);
      padding: 2rem;
      max-width: 500px;
      margin: 50px auto; /* Adjust margin for better vertical centering */
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
      position: relative; /* For closing button positioning */
    }
    .popup-content h3 {
      color: var(--accent-color);
      margin-bottom: 1rem;
    }
    .popup-content button {
        background: var(--accent-color);
        margin-top: 1.5rem;
    }
    .popup-content button:hover {
        background: var(--accent-hover);
    }
    .close-btn {
        position: absolute;
        top: 10px;
        right: 15px;
        background: transparent;
        border: none;
        font-size: 1.5rem;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0;
        width: auto; /* Override button width */
    }
    .close-btn:hover {
        color: var(--text-light);
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Join Our Community</h2>

    <form id="signupForm">
      <label for="fullName">Full Name:</label>
      <input type="text" name="fullName" id="fullName" placeholder="Your Full Name" required>

      <label for="age">Age:</label>
      <input type="number" name="age" id="age" placeholder="Your Age" min="18" max="100" required>

      <label for="bodyType">Body Type:</label>
      <select name="bodyType" id="bodyType" required>
        <option value="">Select Body Type</option>
        <option value="Slim">Slim</option>
        <option value="Chubby">Chubby</option>
        <option value="Fat">Fat</option>
      </select>

      <label for="height">Height:</label>
      <select name="height" id="height" required>
        <option value="">Select Height</option>
        <option value="Half of a door height">Half of a door height</option>
        <option value="Almost a door height">Almost a door height</option>
        <option value="Reaching a door height">Reaching a door height</option>
      </select>

      <label for="sexIdentity">Sex/Gender Identity:</label>
      <select name="sexIdentity" id="sexIdentity" required>
        <option value="">Select Identity</option>
      
        <option value="Transgender (M to F)">Transgender (M to F)</option>
        <option value="Transgender (F to M)">Transgender (F to M)</option>
        <option value="Non-binary">Non-binary</option>
        <option value="Genderfluid">Genderfluid</option>
        <option value="Agender">Agender</option>
        <option value="Bigender">Bigender</option>
        <option value="Two-Spirit">Two-Spirit</option>
        <option value="Intersex">Intersex</option>
        <option value="Heterosexual">Heterosexual</option>
        <option value="Gay">Gay</option>
        <option value="Lesbian">Lesbian</option>
        <option value="Bisexual">Bisexual</option>
        <option value="Pansexual">Pansexual</option>
        <option value="Asexual">Asexual</option>
        <option value="Demisexual">Demisexual</option>
        <option value="Queer">Queer</option>
        <option value="Therian/Otherkin">Therian/Otherkin (Identifies as Animal)</option>
        <option value="Questioning">Questioning</option>
        <option value="Prefer not to say">Prefer not to say</option>
      </select>

      <label for="country">Country:</label>
      <select name="country" id="country" required>
        <option value="">Select Your Country</option>
        <option value="Nigeria">Nigeria</option>
        <option value="Algeria">Algeria</option>
        <option value="Angola">Angola</option>
        <option value="Benin">Benin</option>
        <option value="Botswana">Botswana</option>
        <option value="Burkina Faso">Burkina Faso</option>
        <option value="Burundi">Burundi</option>
        <option value="Cabo Verde">Cabo Verde</option>
        <option value="Cameroon">Cameroon</option>
        <option value="Central African Republic">Central African Republic</option>
        <option value="Chad">Chad</option>
        <option value="Comoros">Comoros</option>
        <option value="Congo (Brazzaville)">Congo (Brazzaville)</option>
        <option value="Congo (Kinshasa)">Congo (Kinshasa)</option>
        <option value="Cote d'Ivoire">Cote d'Ivoire</option>
        <option value="Djibouti">Djibouti</option>
        <option value="Egypt">Egypt</option>
        <option value="Equatorial Guinea">Equatorial Guinea</option>
        <option value="Eritrea">Eritrea</option>
        <option value="Eswatini">Eswatini</option>
        <option value="Ethiopia">Ethiopia</option>
        <option value="Gabon">Gabon</option>
        <option value="Gambia">Gambia</option>
        <option value="Ghana">Ghana</option>
        <option value="Guinea">Guinea</option>
        <option value="Guinea-Bissau">Guinea-Bissau</option>
        <option value="Kenya">Kenya</option>
        <option value="Lesotho">Lesotho</option>
        <option value="Liberia">Liberia</option>
        <option value="Libya">Libya</option>
        <option value="Madagascar">Madagascar</option>
        <option value="Malawi">Malawi</option>
        <option value="Mali">Mali</option>
        <option value="Mauritania">Mauritania</option>
        <option value="Mauritius">Mauritius</option>
        <option value="Morocco">Morocco</option>
        <option value="Mozambique">Mozambique</option>
        <option value="Namibia">Namibia</option>
        <option value="Niger">Niger</option>
        <option value="Rwanda">Rwanda</option>
        <option value="Sao Tome and Principe">Sao Tome and Principe</option>
        <option value="Senegal">Senegal</option>
        <option value="Seychelles">Seychelles</option>
        <option value="Sierra Leone">Sierra Leone</option>
        <option value="Somalia">Somalia</option>
        <option value="South Africa">South Africa</option>
        <option value="South Sudan">South Sudan</option>
        <option value="Sudan">Sudan</option>
        <option value="Tanzania">Tanzania</option>
        <option value="Togo">Togo</option>
        <option value="Tunisia">Tunisia</option>
        <option value="Uganda">Uganda</option>
        <option value="Zambia">Zambia</option>
        <option value="Zimbabwe">Zimbabwe</option>
        <option value="USA">USA</option>
        <option value="UK">UK</option>
        <option value="India">India</option>
      </select>

      <label for="state">State:</label>
      <input type="text" name="state" id="state" placeholder="Your State" required>

      <label for="city">City:</label>
      <input type="text" name="city" id="city" placeholder="Your City" required>

      <label for="lga">Local Government Area (LGA):</label>
      <input type="text" name="lga" id="lga" placeholder="Your LGA" required>

      <label for="password">Create Password (6+ characters/numbers):</label>
      <input type="password" name="password" id="password" minlength="6" placeholder="******" required>

      <label for="confirmPassword">Confirm Password:</label>
      <input type="password" name="confirmPassword" id="confirmPassword" placeholder="******" required>
      <p id="passwordMatchError" style="color:var(--error-color); font-size:0.85em; margin-top:-0.5rem; display:none;">Passwords do not match!</p>


      <div class="disclaimer">
        <strong>Important Password Note:</strong> Do not share this password with anyone. It will be used to change or update your profile and request for withdrawal if you are a creator.
      </div>

      <label for="phoneNumber">Phone Number:</label>
      <input type="tel" name="phoneNumber" id="phoneNumber" placeholder="e.g., +2348012345678" required>

      <label for="email">Email Address:</label>
      <input type="email" name="email" id="email" placeholder="you@example.com" required>

      <div class="disclaimer">
        Upon joining, we will require any means of identification from you (e.g., Driver's License, Voter's Card, National ID, School ID, Work ID, Birth Certificate, or any valid document that carries your information). You will take a picture beside your means of identity. We will NOT collect this here.
      </div>

      <button type="button" onclick="handleJoinCommunity()">Join Community</button>
    </form>
  </div>

  <div id="sexualInterestPopup" class="popup-overlay">
    <div class="popup-content">
      <button class="close-btn" onclick="closePopup('sexualInterestPopup')">&times;</button>
      <h3 id="sexualInterestHeading">What kind of sex are you interested in?</h3>
      <div class="checkbox-group">
        <label><input type="checkbox" name="sexualInterest" value="Solo"> Solo</label>
        <label><input type="checkbox" name="sexualInterest" value="Couple"> Couple</label>
        <label><input type="checkbox" name="sexualInterest" value="Threesome"> Threesome</label>
        <label><input type="checkbox" name="sexualInterest" value="Orgy"> Orgy</label>
        <label><input type="checkbox" name="sexualInterest" value="Group"> Group</label>
        <label><input type="checkbox" name="sexualInterest" value="Online/Virtual"> Online/Virtual</label>
        <label><input type="checkbox" name="sexualInterest" value="Roleplay"> Roleplay</label>
        <label><input type="checkbox" name="sexualInterest" value="Dominance/Submission"> Dominance/Submission</label>
        <label><input type="checkbox" name="sexualInterest" value="Casual"> Casual</label>
        <label><input type="checkbox" name="sexualInterest" value="Long-term"> Long-term</label>
        <label><input type="checkbox" name="sexualInterest" value="Exploring"> Exploring</label>
        <label><input type="checkbox" name="sexualInterest" value="Other"> Other (please specify in message)</label>
      </div>
      <button onclick="submitSexualInterests()">Continue</button>
    </div>
  </div>

  <script>
    // List of African countries (excluding Nigeria, which has a specific charge)
    const AFRICAN_COUNTRIES_1000_CHARGE = [
      "Algeria", "Angola", "Benin", "Botswana", "Burkina Faso", "Burundi", "Cabo Verde",
      "Cameroon", "Central African Republic", "Chad", "Comoros", "Congo (Brazzaville)",
      "Congo (Kinshasa)", "Cote d'Ivoire", "Djibouti", "Egypt", "Equatorial Guinea",
      "Eritrea", "Eswatini", "Ethiopia", "Gabon", "Gambia", "Ghana", "Guinea",
      "Guinea-Bissau", "Kenya", "Lesotho", "Liberia", "Libya", "Madagascar", "Malawi",
      "Mali", "Mauritania", "Mauritius", "Morocco", "Mozambique", "Namibia", "Niger",
      "Rwanda", "Sao Tome and Principe", "Senegal", "Seychelles", "Sierra Leone",
      "Somalia", "South Africa", "South Sudan", "Sudan", "Tanzania", "Togo", "Tunisia",
      "Uganda", "Zambia", "Zimbabwe"
    ];

    let sexualInterestData = []; // To store selected sexual interests

    function closePopup(popupId) {
        document.getElementById(popupId).style.display = 'none';
    }

    function validatePassword() {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const passwordMatchError = document.getElementById('passwordMatchError');

        if (password !== confirmPassword) {
            passwordMatchError.style.display = 'block';
            return false;
        } else {
            passwordMatchError.style.display = 'none';
            return true;
        }
    }

    // Event listener for password fields to show/hide error message dynamically
    document.getElementById('password').addEventListener('keyup', validatePassword);
    document.getElementById('confirmPassword').addEventListener('keyup', validatePassword);


    function handleJoinCommunity() {
      const form = document.getElementById('signupForm');
      if (!form.reportValidity()) { // HTML5 form validation
        return;
      }

      if (!validatePassword()) { // Custom password match validation
          alert('Passwords do not match!');
          return;
      }

      const selectedIdentity = document.getElementById('sexIdentity').value;
      const identitiesForSexualInterest = [
        'Gay', 'Lesbian', 'Transgender (M to F)', 'Transgender (F to M)',
        'Non-binary', 'Genderfluid', 'Agender', 'Bigender', 'Two-Spirit', 'Intersex',
        'Bisexual', 'Pansexual', 'Queer', 'Therian/Otherkin'
      ];

      if (identitiesForSexualInterest.includes(selectedIdentity)) {
        // Show sexual interest popup
        document.getElementById('sexualInterestPopup').style.display = 'block';
        return; // Stop here, payment will be initiated after sexual interest submission
      } else {
        // No specific sexual interest questions, proceed directly to payment
        initiatePaystackPayment();
      }
    }

    function submitSexualInterests() {
      const checkboxes = document.querySelectorAll('#sexualInterestPopup input[name="sexualInterest"]:checked');
      sexualInterestData = Array.from(checkboxes).map(cb => cb.value);

      if (sexualInterestData.length === 0) {
          alert("Please select at least one type of sexual interest.");
          return;
      }

      closePopup('sexualInterestPopup');
      initiatePaystackPayment();
    }

    function initiatePaystackPayment() {
      const userEmail = document.getElementById('email').value; // Get email from form
      const amountToPay = 650; // In Naira

      const handler = PaystackPop.setup({
        key: 'pk_live_6b671064b6a716c1ceffe82bf20a28c317a69584', // ✅ REPLACE WITH YOUR PUBLIC KEY
        email: userEmail,
        amount: amountToPay * 100, // Paystack uses kobo
        currency: 'NGN',
        ref: 'signup-' + Math.floor((Math.random() * 1000000000) + 1), // Unique reference
        callback: function(response) {
          // Payment Success
          alert('Payment complete! Thank you for your payment. Reference: ' + response.reference);

          // Gather all form data including sexual interests
          const formData = {
            fullName: document.getElementById('fullName').value,
            age: document.getElementById('age').value,
            bodyType: document.getElementById('bodyType').value,
            height: document.getElementById('height').value,
            sexIdentity: document.getElementById('sexIdentity').value,
            sexualInterests: sexualInterestData.join(', '), // Join selected interests
            country: document.getElementById('country').value,
            state: document.getElementById('state').value,
            city: document.getElementById('city').value,
            lga: document.getElementById('lga').value,
            // Password is NOT sent to Formspree for security reasons.
            // It should only be handled on your server for hashing and storage.
            // For this frontend, we validate but don't send it.
            phoneNumber: document.getElementById('phoneNumber').value,
            email: document.getElementById('email').value,
            paystack_reference: response.reference,
            payment_amount: amountToPay
          };

          // --- PLACE YOUR FORMSPREE URL HERE ---
          const FORMSPREE_URL = 'https://formspree.io/f/xovdrlby'; // <---- IMPORTANT: Replace this with your actual Formspree URL!

          fetch(FORMSPREE_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Accept': 'application/json'
            },
            body: JSON.stringify(formData)
          })
          .then(res => res.json())
          .then(data => {
            if (data.ok) {
              console.log('Form data sent to Formspree successfully!');
              // Redirect to processing page after payment and data initiation
              window.location.href = 'signup-processing.html';
            } else {
              alert('An error occurred while submitting your data. Please contact support.');
              console.error('Formspree error:', data);
              // Still redirect to processing page, as payment was successful
              window.location.href = 'signup-processing.html';
            }
          })
          .catch(error => {
            alert('An error occurred during data submission. Please contact support.');
            console.error('Error submitting to Formspree:', error);
            // Still redirect to processing page
            window.location.href = 'signup-processing.html';
          });
        },
        onClose: function() {
          alert('Payment was cancelled. You need to complete payment to join the community.');
        }
      });
      handler.openIframe();
    }
  </script>
</body>
</html>
